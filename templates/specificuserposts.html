{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <h2>Posts by {{ user.username }}</h2>

  {% if posts %}
  <div class="row">
    {% for post in posts %}
    <div class="col-md-4 mb-4">
      <div class="card h-100 shadow-sm">
        {% if post.IMAGE %}
        <img src="{{ post.IMAGE }}" class="card-img-top" alt="Post image">
        {% endif %}
        <div class="card-body">
          <h5 class="card-title">{{ post.TITLE }}</h5>
          <p class="card-text">{{ post.DESCRIPT or "No description" }}</p>
        </div>
        <div class="card-footer text-muted">
          <small>Likes: {{ post.LIKE_COUNT }} | Comments: {{ post.COMMENT_COUNT }}</small><br>
          <small>Posted on: {{ post.created_at }}</small>
        </div>
      </div>
    </div>
    <div class="mt-auto">
      <form method="POST" action="{{ url_for('admin.delpost', post_id=post.POST_ID) }}" class="d-inline">
        <button type="submit" class="btn btn-danger btn-sm">Delete Post</button>
      </form>
    </div>

    {% endfor %}
  </div>
  {% else %}
  <p>No posts found for this user.</p>
  {% endif %}
</div>
{% endblock %}

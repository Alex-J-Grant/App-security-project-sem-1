<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{% block title %}{% endblock %}</title>

    <!-- Bootstrap 5.1.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
          crossorigin="anonymous">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Your custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/chatbot.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/includes.css') }}">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Marked.js (Markdown parser) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- jQuery (optional) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- Your custom JS module -->
    <script type="module" src="/static/javascript/sanitize.js"></script>

    <style>
      /* Base background and text colors */
      body {
        background-color: #f8f4e3; /* soft cream */
        color: #333333; /* dark charcoal */
        font-size: 1.1rem; /* slightly bigger for readability */
      }
      a {
        color: #336b87; /* teal links */
        text-decoration: underline;
      }
      a:hover, a:focus {
        color: #f29e4c; /* warm orange hover */
        text-decoration: none;
      }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">

{% block navbar %}
{% include 'includes/_navbar.html' %}
{% endblock %}

<!-- Main content area with flex-grow to push footer down -->
<div class="container-fluid my-4 flex-grow-1">
    {% block content %}
    {% endblock %}
</div>

{% block footer %}
<footer class="footer mt-auto" style="background-color: #336b87; color: #333333; padding-top: 3rem; padding-bottom: 3rem;">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3">
        <h3 class="mb-4" style="color: #1f3d3d; font-size: 1.5rem;">Account</h3>
        <ul class="list-unstyled" style="font-size: 1.1rem;">
          <li><a href="/user/profile" class="hover-link" style="color: #f8f4e3; text-decoration: underline;">Your Account</a></li>
          <li><a href="/user/profile/edit" class="hover-link" style="color: #f8f4e3; text-decoration: underline;">Edit Account</a></li>
          <li><a href="/yourOrders" class="hover-link" style="color: #f8f4e3; text-decoration: underline;">Your Orders</a></li>
        </ul>
      </div>
      <div class="col-sm-3">
        <h3 class="mb-4" style="color: #1f3d3d; font-size: 1.5rem;">Socials</h3>
        <ul class="list-unstyled" style="font-size: 1.1rem;">
          <li><a href="https://x.com/?mx=2" class="hover-link" target="_blank" rel="noopener noreferrer" style="color: #f8f4e3; text-decoration: underline;">Twitter</a></li>
          <li><a href="https://www.instagram.com/" class="hover-link" target="_blank" rel="noopener noreferrer" style="color: #f8f4e3; text-decoration: underline;">Instagram</a></li>
          <li><a href="https://www.facebook.com/" class="hover-link" target="_blank" rel="noopener noreferrer" style="color: #f8f4e3; text-decoration: underline;">Facebook</a></li>
        </ul>
      </div>
      <div class="col-sm-3">
        <h3 class="mb-4" style="color: #1f3d3d; font-size: 1.5rem;">Support</h3>
        <ul class="list-unstyled" style="font-size: 1.1rem;">
          <li><a href="/contact/add" class="hover-link" style="color: #f8f4e3; text-decoration: underline;">Contact us</a></li>
          <li><a href="/faq" class="hover-link" style="color: #f8f4e3; text-decoration: underline;">FAQ</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Chatbot Button -->
  <a id="chatbot-button" class="rounded-circle d-flex align-items-center justify-content-center position-fixed bottom-0 end-0 m-3"
     style="width: 60px; height: 60px; cursor: pointer; z-index: 1050; background-color: #336b87;">
    <img src="{{ url_for('static', filename='images/John_Placeholder.png') }}" alt="Chatbot" class="img-fluid" style="max-height: 50px;">
  </a>

  <!-- Chatbox -->
  <div class="input-group mb-3" id="chatboxer" style="display: none; position: fixed; bottom: 70px; right: 15px; width: 320px; max-width: 90%; z-index: 1050; background: #fefefe; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.15); flex-direction: column;">
    <div id="top-chat" class="d-flex align-items-center justify-content-between p-2" style="position: sticky; top: 0; background: #336b87; opacity: 0.95; border-top-left-radius: 8px; border-top-right-radius: 8px; color: white;">
      <h3 class="mb-0">Neuro</h3>
      <button id="x" class="btn btn-close btn-close-white" aria-label="Close chat"></button>
    </div>
    <div id="chatbox" class="flex-grow-1 p-2 overflow-auto" style="max-height: 300px; color: #333333;"></div>
    <div class="chatbox-texting p-2" style="position: relative;">
      <input type="text" id="user_input" class="form-control" placeholder="How can I help you?" aria-label="User prompt" aria-describedby="chatbot-enter" style="font-size: 1.1rem;">
      <button id="chatbot-enter" class="btn btn-info rounded-end mt-2 w-100" type="button" style="background-color: #f29e4c; border: none; font-weight: 600; font-size: 1.1rem;">Send</button>
    </div>
  </div>
</footer>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
{% endblock %}

</body>
</html>
